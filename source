local Whitelist = {
    ["BaddiesCarbbiean"] = true,
    ["MFMacShow"] = true,
    -- add more if needed
}

if not Whitelist[game.Players.LocalPlayer.Name] then
    return -- exit the script immediately if not whitelisted
end
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Baddies Caribbean",
   Icon = 0, -- Icon in Topbar. Can use Lucide Icons (string) or Roblox Image (number). 0 to use no icon (default).
   LoadingTitle = "Loading...",
   LoadingSubtitle = "by Jace",
   Theme = "Ocean - Ocean", -- Check https://docs.sirius.menu/rayfield/configuration/themes

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false, -- Prevents Rayfield from warning when the script has a version mismatch with the interface

   ConfigurationSaving = {
      Enabled = false,
      FolderName = nil, -- Create a custom folder for your hub/game
      FileName = "Baddie"
   },

   Discord = {
      Enabled = false, -- Prompt the user to join your Discord server if their executor supports it
      Invite = "noinvitelink", -- The Discord invite code, do not include discord.gg/. E.g. discord.gg/ ABCD would be ABCD
      RememberJoins = true -- Set this to false to make them join the discord every time they load it up
   },

   KeySystem = true, -- Set this to true to use our key system
   KeySettings = {
      Title = "SilkPress Quaker",
      Subtitle = "Riz was here...",
      Note = "No Entry For You | No Ticket",
      FileName = "QuitKey", 
      SaveKey = false, -- 
      GrabKeyFromSite = false,
      Key = {"Inactive"}
   }
})


local MainTab = Window:CreateTab("Main", nil) -- Title, Image
local MainSection = MainTab:CreateSection("Main")


local Keybind = MainTab:CreateKeybind({
   Name = "Rush All",
   CurrentKeybind = "T",
   HoldToInteract = false,
   Flag = "Keybind1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Keybind)
               local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer

local function rushAll()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local args = {
                [1] = "Rush",
                [2] = player.Name
            }
            ReplicatedStorage:WaitForChild("events"):WaitForChild("DuoPlrEvents"):FireServer(unpack(args))
        end
    end
end

-- You can connect it to a keybind too if you want:
local UserInputService = game:GetService("UserInputService")

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.T then -- press T to Rush All
        rushAll()
    end
end)
   end,
})

local Keybind = MainTab:CreateKeybind({
   Name = "HeadLock All",
   CurrentKeybind = "R",
   HoldToInteract = false,
   Flag = "Keybind1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Keybind)
              local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer

local function damageAll()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local args = {
                [1] = "DamageTool",
                [2] = player.Name
            }
            ReplicatedStorage:WaitForChild("events"):WaitForChild("DuoPlrEvents"):FireServer(unpack(args))
        end
    end
end

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.R then -- Press R
        damageAll()
    end
end)
   end,
})

local Button = MainTab:CreateButton({
   Name = "Infinite Yield",
   Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
   end,
})

local Button = MainTab:CreateButton({
   Name = "Money Gain",
   Callback = function()
            local args = {
    [1] = 10000000000000000
}

game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("MoneyGain"):FireServer(unpack(args))
   end,
})

local Button = MainTab:CreateButton({
   Name = "Lose Fight",
   Callback = function()
            local args = {
    [1] = "LooseFight"
}

game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("SoloPlrEvents"):FireServer(unpack(args))
   end,
})


local Button = MainTab:CreateButton({
   Name = "Kill All",
   Callback = function()
             --// 1. DamageTool everyone first
for _, player in pairs(game.Players:GetPlayers()) do
    if player ~= game.Players.LocalPlayer then
        local args = {
            [1] = "DamageTool",
            [2] = player.Name
        }
        game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("DuoPlrEvents"):FireServer(unpack(args))
    end
end

--// 2. Pop up a message saying "SUFFER."
local StarterGui = game:GetService("StarterGui")
StarterGui:SetCore("SendNotification", {
    Title = "Baddie Attack",
    Text = "SUFFER.",
    Duration = 2,
})

--// 3. Create a dramatic explosion effect around you
local char = game.Players.LocalPlayer.Character
if char and char:FindFirstChild("HumanoidRootPart") then
    local explosion = Instance.new("Explosion")
    explosion.Position = char.HumanoidRootPart.Position
    explosion.BlastRadius = 10
    explosion.BlastPressure = 50000
    explosion.Parent = workspace
end

--// 4. Wait a moment then RESET yourself to finish the kill
task.wait(1.2)
game.Players.LocalPlayer.Character:BreakJoints()
   end,
})

local Button = MainTab:CreateButton({
   Name = "Mace All",
   Callback = function()
            for _, player in pairs(game.Players:GetPlayers()) do
    if player ~= game.Players.LocalPlayer then
        -- Rush them first
        local argsRush = {
            [1] = "Rush",
            [2] = player.Name
        }
        game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("DuoPlrEvents"):FireServer(unpack(argsRush))
        
        task.wait(0.1) -- small wait so server registers Rush
        
        -- Fire (Pepper Spray) them after Rush
        local argsFire = {
            [1] = "Fire",
            [2] = player.Name
        }
        game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("DuoPlrEvents"):FireServer(unpack(argsFire))
    end
end
   end,
})

local Input = MainTab:CreateInput({
    Name = "Announcement",
    CurrentValue = "",
    PlaceholderText = "Type your announcement here...",
    RemoveTextAfterFocusLost = false,
    Flag = "Input1",
    Callback = function(Text)
        -- Fire the Announcement Remote with the input text
        local args = {
            [1] = Text
        }

        game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("Announcement"):FireServer(unpack(args))
    end,
})

local Button = MainTab:CreateButton({
   Name = "Smoke",
   Callback = function()
            local character = game.Players.LocalPlayer.Character
local humanoid = character:FindFirstChildOfClass("Humanoid")

-- Animation
local anim = Instance.new("Animation")
anim.AnimationId = "rbxassetid://507766388" -- Chill idle animation
local loaded = humanoid:LoadAnimation(anim)
loaded:Play()

-- Fake Blunt Prop
local blunt = Instance.new("Part")
blunt.Size = Vector3.new(0.2, 0.2, 1)
blunt.BrickColor = BrickColor.new("White")
blunt.Material = Enum.Material.SmoothPlastic
blunt.Anchored = false
blunt.CanCollide = false
blunt.Name = "Blunt"

-- Weld it to the hand
local hand = character:FindFirstChild("RightHand") or character:FindFirstChild("Right Arm")
blunt.CFrame = hand.CFrame * CFrame.new(0, 0, -0.5)
blunt.Parent = character

local weld = Instance.new("WeldConstraint")
weld.Part0 = blunt
weld.Part1 = hand
weld.Parent = blunt

-- Smoke Particle
local smoke = Instance.new("ParticleEmitter")
smoke.Texture = "rbxassetid://258128463"
smoke.Rate = 20
smoke.Speed = NumberRange.new(0.5, 1)
smoke.Lifetime = NumberRange.new(0.5, 1.2)
smoke.Size = NumberSequence.new(0.8)
smoke.Parent = blunt

-- Cleanup
task.delay(6, function()
	loaded:Stop()
	smoke.Enabled = false
	blunt:Destroy()
end)

   end,
})

local Button = MainTab:CreateButton({
   Name = "Caribbean Castle",
   Callback = function()
           local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

-- Base only for script users
local function isScriptUser()
    return true
end

if isScriptUser() then
    local baseCenter = Vector3.new(0, 300, 0)

    -- Floor
    local base = Instance.new("Part")
    base.Size = Vector3.new(150, 2, 150)
    base.Anchored = true
    base.Position = baseCenter
    base.Material = Enum.Material.SmoothPlastic
    base.BrickColor = BrickColor.new("Bright bluish green")
    base.Name = "FloatingBase"
    base.Parent = workspace

    -- Walls
    local wallHeight = 20
    local wallThickness = 2
    local wallLength = 150

    local function makeWall(pos, size)
        local wall = Instance.new("Part")
        wall.Size = size
        wall.Anchored = true
        wall.Position = pos
        wall.BrickColor = BrickColor.new("Sea green")
        wall.Material = Enum.Material.SmoothPlastic
        wall.Parent = workspace
    end

    -- 4 walls
    makeWall(baseCenter + Vector3.new(0, wallHeight/2, wallLength/2), Vector3.new(wallLength, wallHeight, wallThickness)) -- Front
    makeWall(baseCenter + Vector3.new(0, wallHeight/2, -wallLength/2), Vector3.new(wallLength, wallHeight, wallThickness)) -- Back
    makeWall(baseCenter + Vector3.new(wallLength/2, wallHeight/2, 0), Vector3.new(wallThickness, wallHeight, wallLength)) -- Right
    makeWall(baseCenter + Vector3.new(-wallLength/2, wallHeight/2, 0), Vector3.new(wallThickness, wallHeight, wallLength)) -- Left

    -- Roof
    local roof = Instance.new("Part")
    roof.Size = Vector3.new(150, 1, 150)
    roof.Anchored = true
    roof.Position = baseCenter + Vector3.new(0, wallHeight + 1, 0)
    roof.BrickColor = BrickColor.new("Toothpaste")
    roof.Material = Enum.Material.SmoothPlastic
    roof.Parent = workspace

    -- Sparkle Decor
    local sparkles = Instance.new("ParticleEmitter")
    sparkles.Texture = "rbxassetid://258128463"
    sparkles.Rate = 35
    sparkles.Lifetime = NumberRange.new(1.5, 2.5)
    sparkles.Speed = NumberRange.new(1, 2)
    sparkles.Size = NumberSequence.new(1)
    sparkles.Color = ColorSequence.new(Color3.fromRGB(0, 200, 255))
    sparkles.Parent = base

    -- Island NPC
    local npc = Instance.new("Model", base)
    npc.Name = "IslandNPC"

    local head = Instance.new("Part")
    head.Name = "Head"
    head.Size = Vector3.new(2, 1, 1)
    head.Position = baseCenter + Vector3.new(0, 5, 0)
    head.Anchored = true
    head.BrickColor = BrickColor.new("Reddish brown")
    head.Parent = npc

    local torso = Instance.new("Part")
    torso.Name = "Torso"
    torso.Size = Vector3.new(2, 2, 1)
    torso.Position = head.Position - Vector3.new(0, 1.5, 0)
    torso.Anchored = true
    torso.BrickColor = BrickColor.new("Cocoa")
    torso.Parent = npc

    -- TP you to the base
    if Character and Character:FindFirstChild("HumanoidRootPart") then
        Character:MoveTo(baseCenter + Vector3.new(0, 5, 0))
    end
end

local UserList = {"noirprnc"} -- Add more users here if needed
local RS = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Only script users see the base
if table.find(UserList, LocalPlayer.Name) then
	local castle = Instance.new("Model", workspace)
	castle.Name = "FloatingCastle"

	-- Base platform
	local base = Instance.new("Part", castle)
	base.Size = Vector3.new(100, 2, 100)
	base.Position = Vector3.new(0, 500, 0)
	base.Anchored = true
	base.BrickColor = BrickColor.new("Medium blue")

	-- Ceiling sparkle
	local ceiling = Instance.new("Part", castle)
	ceiling.Size = Vector3.new(100, 1, 100)
	ceiling.Position = base.Position + Vector3.new(0, 25, 0)
	ceiling.Anchored = true
	ceiling.Transparency = 1

	local sparkles = Instance.new("ParticleEmitter", ceiling)
	sparkles.Texture = "rbxassetid://296874871"
	sparkles.Color = ColorSequence.new(Color3.fromRGB(255, 170, 255))
	sparkles.Rate = 100
	sparkles.Lifetime = NumberRange.new(2)
	sparkles.Speed = NumberRange.new(0, 1)

	-- Portrait wall
	for i, user in ipairs(UserList) do
		local posX = -40 + (i * 15)
		local portraitPart = Instance.new("Part", castle)
		portraitPart.Size = Vector3.new(6, 8, 1)
		portraitPart.Anchored = true
		portraitPart.Position = base.Position + Vector3.new(posX, 10, -48)
		portraitPart.BrickColor = BrickColor.new("Institutional white")
		portraitPart.Material = Enum.Material.SmoothPlastic

		-- Image (avatar)
		local thumbType = Enum.ThumbnailType.HeadShot
		local thumbSize = Enum.ThumbnailSize.Size420x420
		local thumbUrl = Players:GetUserThumbnailAsync(user, thumbType, thumbSize)
		local img = Instance.new("Decal", portraitPart)
		img.Texture = thumbUrl
		img.Face = Enum.NormalId.Front

		-- Username label
		local textLabel = Instance.new("SurfaceGui", portraitPart)
		textLabel.Face = Enum.NormalId.Bottom
		local name = Instance.new("TextLabel", textLabel)
		name.Size = UDim2.new(1, 0, 1, 0)
		name.Text = "<i>" .. user .. "</i>"
		name.TextColor3 = Color3.fromRGB(255, 215, 0)
		name.TextScaled = true
		name.Font = Enum.Font.Gotham
		name.RichText = true
		name.BackgroundTransparency = 1
	end
end

   end,
})

local Button = MainTab:CreateButton({
   Name = "Exit Base",
   Callback = function()
   	local Players = game:GetService("Players")
local LP = Players.LocalPlayer

-- Replace this with your map‚Äôs main coordinates
local mapPosition = Vector3.new(0, 1, 0)

-- Teleport back to map
task.wait(0.5)
if LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
    LP.Character.HumanoidRootPart.CFrame = CFrame.new(mapPosition)
end

   end,
})

local Button = MainTab:CreateButton({
   Name = "Jace's Cave",
   Callback = function()
  	--// Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- Height offset for floating cave
local floatHeight = 130

-- Function to clear previous cave if exists
local function clearOldCave()
    local oldCave = workspace:FindFirstChild("WerewolfCave")
    if oldCave then
        oldCave:Destroy()
    end
end

-- Function to create a red werewolf cave with cute details, floating high
local function createWerewolfCave()
    clearOldCave()

    local caveModel = Instance.new("Model")
    caveModel.Name = "WerewolfCave"
    caveModel.Parent = workspace

    -- Floor
    local floor = Instance.new("Part")
    floor.Size = Vector3.new(60, 1, 60)
    floor.Position = Vector3.new(0, 0 + floatHeight, 0)
    floor.Anchored = true
    floor.Material = Enum.Material.Slate
    floor.BrickColor = BrickColor.new("Really red")
    floor.Name = "CaveFloor"
    floor.Parent = caveModel

    -- Walls
    local wallThickness = 2
    local wallHeight = 20

    local function makeWall(pos, size)
        local wall = Instance.new("Part")
        wall.Anchored = true
        wall.Size = size
        wall.Position = pos + Vector3.new(0, floatHeight, 0)
        wall.Material = Enum.Material.Rock
        wall.BrickColor = BrickColor.new("Dark red")
        wall.Parent = caveModel
    end

    makeWall(Vector3.new(0, wallHeight/2, -30), Vector3.new(60, wallHeight, wallThickness)) -- Back wall
    makeWall(Vector3.new(0, wallHeight/2, 30), Vector3.new(60, wallHeight, wallThickness)) -- Front wall
    makeWall(Vector3.new(-30, wallHeight/2, 0), Vector3.new(wallThickness, wallHeight, 60)) -- Left wall
    makeWall(Vector3.new(30, wallHeight/2, 0), Vector3.new(wallThickness, wallHeight, 60)) -- Right wall

    -- Ceiling with red sparkles
    local ceiling = Instance.new("Part")
    ceiling.Size = Vector3.new(60, 1, 60)
    ceiling.Position = Vector3.new(0, wallHeight + floatHeight, 0)
    ceiling.Anchored = true
    ceiling.Transparency = 0.5
    ceiling.Material = Enum.Material.Neon
    ceiling.BrickColor = BrickColor.new("Really red")
    ceiling.Name = "Ceiling"
    ceiling.Parent = caveModel

    local sparkleEmitter = Instance.new("ParticleEmitter")
    sparkleEmitter.Texture = "rbxassetid://241594314" -- star sparkles
    sparkleEmitter.Color = ColorSequence.new(Color3.new(1, 0.2, 0.2))
    sparkleEmitter.LightEmission = 1
    sparkleEmitter.Rate = 25
    sparkleEmitter.Speed = NumberRange.new(0, 1)
    sparkleEmitter.Lifetime = NumberRange.new(2)
    sparkleEmitter.Size = NumberSequence.new(0.5)
    sparkleEmitter.Parent = ceiling

    -- Cute glowing mushrooms
    local mushroomPositions = {
        Vector3.new(10, 0.5, 10),
        Vector3.new(-12, 0.5, 15),
        Vector3.new(15, 0.5, -10),
        Vector3.new(-15, 0.5, -12),
    }
    for _, pos in ipairs(mushroomPositions) do
        local mush = Instance.new("Part")
        mush.Size = Vector3.new(2, 3, 2)
        mush.Position = pos + Vector3.new(0, floatHeight, 0)
        mush.Anchored = true
        mush.Material = Enum.Material.Neon
        mush.BrickColor = BrickColor.new("Bright red")
        mush.Shape = Enum.PartType.Cylinder
        mush.Name = "GlowingMushroom"
        mush.Parent = caveModel

        local cap = Instance.new("Part")
        cap.Size = Vector3.new(3, 1, 3)
        cap.Position = pos + Vector3.new(0, 1.5 + floatHeight, 0)
        cap.Anchored = true
        cap.Material = Enum.Material.Neon
        cap.BrickColor = BrickColor.new("Really red")
        cap.Shape = Enum.PartType.Ball
        cap.Name = "MushroomCap"
        cap.Parent = caveModel
    end

    -- Dining Table setup
    local tableBase = Instance.new("Part")
    tableBase.Size = Vector3.new(10, 1, 6)
    tableBase.Position = Vector3.new(0, 1 + floatHeight, 0)
    tableBase.Anchored = true
    tableBase.Material = Enum.Material.Wood
    tableBase.BrickColor = BrickColor.new("Reddish brown")
    tableBase.Name = "DiningTable"
    tableBase.Parent = caveModel

    local legOffsets = {
        Vector3.new(4.5, -1, 2.5),
        Vector3.new(4.5, -1, -2.5),
        Vector3.new(-4.5, -1, 2.5),
        Vector3.new(-4.5, -1, -2.5),
    }
    for _, offset in ipairs(legOffsets) do
        local leg = Instance.new("Part")
        leg.Size = Vector3.new(1, 3, 1)
        leg.Position = tableBase.Position + offset
        leg.Anchored = true
        leg.Material = Enum.Material.Wood
        leg.BrickColor = BrickColor.new("Brown")
        leg.Name = "TableLeg"
        leg.Parent = caveModel
    end

    local chairPositions = {
        Vector3.new(0, 1 + floatHeight, 4),
        Vector3.new(0, 1 + floatHeight, -4),
        Vector3.new(5.5, 1 + floatHeight, 0),
        Vector3.new(-5.5, 1 + floatHeight, 0),
    }
    for _, pos in ipairs(chairPositions) do
        local chairSeat = Instance.new("Part")
        chairSeat.Size = Vector3.new(2, 0.5, 2)
        chairSeat.Position = pos
        chairSeat.Anchored = true
        chairSeat.Material = Enum.Material.Wood
        chairSeat.BrickColor = BrickColor.new("Reddish brown")
        chairSeat.Name = "ChairSeat"
        chairSeat.Parent = caveModel

        local chairBack = Instance.new("Part")
        chairBack.Size = Vector3.new(2, 3, 0.5)
        chairBack.Position = pos + Vector3.new(0, 1.5, -0.75)
        chairBack.Anchored = true
        chairBack.Material = Enum.Material.Wood
        chairBack.BrickColor = BrickColor.new("Reddish brown")
        chairBack.Name = "ChairBack"
        chairBack.Parent = caveModel
    end

    return caveModel
end

-- Function to teleport player inside the cave smoothly
local function teleportToCave(caveModel)
    local floor = caveModel:FindFirstChild("CaveFloor")
    if floor then
        local targetPos = floor.Position + Vector3.new(0, 5, 0)
        local tweenInfo = TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(hrp, tweenInfo, {CFrame = CFrame.new(targetPos)})
        tween:Play()
        tween.Completed:Wait()
    end
end

-- Main
local cave = createWerewolfCave()
teleportToCave(cave)

   end,
})

local Button = MainTab:CreateButton({
   Name = "Lightning Strike",
   Callback = function()
   	local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Remote Setup
local rushRemote = ReplicatedStorage:WaitForChild("events"):WaitForChild("DuoPlrEvents")

-- Settings
local WHITELIST = { ["BaddiesCarbbiean"] = true }
local spellPhrase = "come forth, wind"
local spellActive = false
local cooldown = false

-- Teleport Back Helper
local function teleportBack(position)
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char:MoveTo(position)
    end
end

-- Lightning Effect
local function lightningStrike(target)
    local attachment = Instance.new("Attachment", target)
    
    local bolt = Instance.new("Beam")
    bolt.Attachment0 = attachment
    bolt.Attachment1 = attachment
    bolt.Width0 = 0.4
    bolt.Width1 = 0.4
    bolt.Color = ColorSequence.new(Color3.fromRGB(170, 255, 255))
    bolt.LightEmission = 1
    bolt.Texture = "rbxassetid://130207098"
    bolt.TextureSpeed = 1
    bolt.FaceCamera = true
    bolt.Parent = target
    
    local sound = Instance.new("Sound", target)
    sound.SoundId = "rbxassetid://138186576" -- Thunder sound
    sound.Volume = 3
    sound:Play()
    
    game.Debris:AddItem(bolt, 0.6)
    game.Debris:AddItem(sound, 1)
end

-- Click Trigger
Mouse.Button1Down:Connect(function()
    if spellActive and not cooldown and WHITELIST[LocalPlayer.Name] then
        local target = Mouse.Target
        if target and target.Parent and Players:GetPlayerFromCharacter(target.Parent) then
            cooldown = true
            spellActive = false

            local victimPlayer = Players:GetPlayerFromCharacter(target.Parent)
            local myPos = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character.HumanoidRootPart.Position

            -- Lightning VFX
            lightningStrike(target.Parent)

            -- Wait a moment
            task.wait(0.2)

            -- Rush/Fling Target
            local args = {
                [1] = "Rush",
                [2] = victimPlayer.Name
            }
            rushRemote:FireServer(unpack(args))

            -- Restore Position
            task.delay(2, function()
                if myPos then teleportBack(myPos) end
                cooldown = false
            end)
        end
    end
end)

-- Spell Word Activation
LocalPlayer.Chatted:Connect(function(msg)
    if msg:lower() == spellPhrase and WHITELIST[LocalPlayer.Name] then
        spellActive = true
    end
end)

   end,
})

local Button = Maintab:CreateButton({
   Name = "Fluctus Impulsa",
   Callback = function()
  	-- üåÄ FLUCTUA IMPULSA: Chat-based Tornado Rush Spell
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Debris = game:GetService("Debris")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local ChatService = game:GetService("StarterGui")

-- üîê WHITELIST SYSTEM
local AllowedUsers = {
    ["BaddiesCarbbiean"] = true,
    ["AnotherUser"] = true,
    -- Add more if needed
}

local ProjectKey = "BaddiesCarbbiean"
if not AllowedUsers[LocalPlayer.Name] then return end

-- üéØ SETTINGS
local RushRemote = ReplicatedStorage:WaitForChild("events"):WaitForChild("DuoPlrEvents")
local Cooldown = false

local function CastFluctuaImpulsa()
    if Cooldown then return end
    Cooldown = true

    -- üå™ RANDOM SPAWN POSITION NEAR PLAYER
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local randomOffset = Vector3.new(math.random(-20, 20), 0, math.random(-20, 20))
    local spawnPosition = hrp.Position + randomOffset

    -- üîÑ TORNADO ZONE
    local zone = Instance.new("Part")
    zone.Size = Vector3.new(20, 1, 20)
    zone.Anchored = true
    zone.CanCollide = false
    zone.CFrame = CFrame.new(spawnPosition)
    zone.Transparency = 1
    zone.Name = "TornadoZone"
    zone.Parent = workspace

    -- VFX (Optional)
    for i = 1, 2 do
        local ring = Instance.new("ParticleEmitter")
        ring.Texture = "rbxassetid://1095708"
        ring.Rate = 100
        ring.Lifetime = NumberRange.new(1)
        ring.Speed = NumberRange.new(0)
        ring.Size = NumberSequence.new(5)
        ring.Rotation = NumberRange.new(0, 360)
        ring.Color = ColorSequence.new(Color3.fromRGB(180, 0, 255))
        ring.Parent = zone
    end

    local targets = {}
    local active = true
    local duration = 7

    task.delay(duration, function()
        active = false

        -- üë• Rush everyone caught inside
        for _, victim in pairs(targets) do
            task.wait(0.4)
            RushRemote:FireServer("Rush", victim.Name)
        end

        Debris:AddItem(zone, 1)
        Cooldown = false
    end)

    RunService.Heartbeat:Connect(function()
        if not active then return end

        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local dist = (player.Character.HumanoidRootPart.Position - zone.Position).Magnitude
                if dist <= 10 then
                    if not table.find(targets, player) then
                        table.insert(targets, player)
                    end
                elseif table.find(targets, player) then
                    table.remove(targets, table.find(targets, player))
                end
            end
        end
    end)
end

-- üí¨ LISTEN FOR SPELL IN CHAT
LocalPlayer.Chatted:Connect(function(msg)
    if msg:lower() == "fluctua impulsa" then
        CastFluctuaImpulsa()
    end
end)

   end,
})
